<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="x-ua-compatible" content="ie=edge">
	<!-- Add icon library -->
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/css/bootstrap.min.css">
	<script src="https://cdn.staticfile.org/jquery/2.1.1/jquery.min.js"></script>
	<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

	<style>
		#chartdiv {
			top: 10%;
			width: 50%;
			height: 500px;
			float: left;
			left:-1%;
		}
		#chartdiv2 {
			top: 10%;
			width: 45%;
			height: 507px;
			float: right;
		}
		#legenddiv {
			left: 1%;
			top: 10%;
			width: 5%;
			height: 500px;
			float: left;
		}
		#link {
			float:right;
			margin-top:5%;
			margin-right:35%;
		}
		#postQuestion {
			margin: 1% 0 0 76%;
			font-family:"Gill Sans", "Gill Sans MT", "Myriad Pro", "DejaVu Sans Condensed", Helvetica, Arial, "sans-serif";
		}
		.select-css {
			text-align: right;
			border: 1px solid #ccc;
			width: 120px;
			border-radius: 3px;
			overflow: hidden;
			background-color: #fff;
			background-image: url('data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23007CB2%22%20d%3D%22M287%2069.4a17.6%2017.6%200%200%200-13-5.4H18.4c-5%200-9.3%201.8-12.9%205.4A17.6%2017.6%200%200%200%200%2082.2c0%205%201.8%209.3%205.4%2012.9l128%20127.9c3.6%203.6%207.8%205.4%2012.8%205.4s9.2-1.8%2012.8-5.4L287%2095c3.5-3.5%205.4-7.8%205.4-12.8%200-5-1.9-9.2-5.5-12.8z%22%2F%3E%3C%2Fsvg%3E'),
			linear-gradient(to bottom, #ffffff 0%,#e5e5e5 100%);
			background-repeat: no-repeat, repeat;
			background-position: right .7em top 50%, 0 0;
			background-size: .65em auto, 100%;
		}
		.hidden_div {
			margin: 0;
			position: fixed;
			overflow: auto;
			top: 10%;;
			right: 0;
			bottom: 0;
			left: 0;
			z-index: 999;
			outline: 0;
			opacity: 0.5;
			background: #000;
			display:none;
		}

		body {
			background-image: url("WechatIMG30.jpeg");
			background-size: cover;
			height: 100%;
			width: 100%;
			margin: 0;
			padding: 0;
		}

		.navigator ul{
			background-color: rgba(179,179,179,0.8);
			list-style-type: none;
			margin-bottom: 6%;
			margin-top: 0;
			padding:0;
			width: 100%;
			overflow: hidden;

		}
		.navigator li{
			float: left;
			display: block;
			width: 50%;

		}

		.navigator li a{
			display: block;
			color: rgba(255,255,255,0.8);
			text-align: center;
			font-size: 30px;
			margin-top: 1%;
			margin-bottom: 1%;
		}
		.TEST{
			background-color: #FFFFFF;
			position: absolute;
			height: 70%;
			width: 80%;
			left: 10%;
			top: 15%;
			overflow: auto;
			/*display: none;*/
		}
		.selectChart{
			background-color: #FFFFFF;
			position: absolute;
			height: 10%;
			width: 100%;
			text-align: right;
			/*left: 10%;*/
			top: 2%;
			margin-left: -2%;
			/*overflow: auto;*/
		}
		.main{
			width:80%;
			height:100%;
			margin:0 auto;
		}
		.left{
			width:45%;
			height:900px;
			float:left;
		}
		.middle{
			width:10%;
			height:900px;
			float:left;
		}
		.right{
			width:45%;
			height:900px;
			float:right;
		}
		.center-fit {
			/*left: 20%;*/
			max-width: 100%;
			max-height: 100%;
			margin: auto;
			vertical-align:middle;
		}
		.intro {
			/*margin-left: 2%;*/
			/*left: 5%;*/
			text-align: left;
			float: left;
			width: 73%;
			line-height : 100%;
			margin-bottom:5%;
			margin-left:5%;
		}
		.photo{
			margin-bottom:3%;
			top: 2%;
			float:left;
			width:20%;
			/*margin-bottom: 20%;*/
		}
		.white{
			width:100%;
			height : 15%;
		}
		.iconcontainer img {
			display: block;
			margin: 0 auto;
			text-align: center;
			width: 50%;
			height: 100%;
		}
	</style>
	<script src="https://www.amcharts.com/lib/4/core.js"></script>
	<script src="https://www.amcharts.com/lib/4/charts.js"></script>
	<script src="https://www.amcharts.com/lib/4/themes/animated.js"></script>
</head>


<body>
<div class="navigator">
	<ul>
		<li id="Home"><a href="#home">Home</a></li>
		<!--<li><a href="#news">Instructions</a></li>
         <li><a href="#contact">Background</a></li>-->
		<li><a href="#about">About us</a></li>
	</ul>
</div>


<div class="TEST">
	<div  class="selectChart">
		<form style="overflow: auto; height: 80%;" id="postQuestion">
			Which chart do you want to compare with?
			<select class="select-css" id="average" name="n">

			</select><br>
		</form>
	</div>

	<div id="legenddiv"></div>
	<div id="chartdiv"></div>

	<script>
		var value = window.sessionStorage.name;
		var obj = JSON.parse(value);
		var temp1 =  obj["UNI"];
		var temp2 =  obj["BEN"];
		var temp3 =  obj["TRAD"];
		var temp4 =  obj["CON"];
		var temp5 =  obj["SEC"];
		var temp6 =  obj["POW"];
		var temp7 = obj["ACH"];
		var temp8 = obj["HED"];
		var temp9 = obj["STIM"];
		var temp10 = obj["SD"];
		// var value = window.sessionStorage.name;
		// var getValue = value.split("-");
		// var answerList = getValue.slice(0,getValue.length/2);
		// var typeList = getValue.slice(getValue.length/2,getValue.length+1);
		// for (i=0;i<answerList.length;i++) {
		// 	if(typeList[i] ==  "UNI"){
		// 		temp1.push(answerList[i]);
		// 	}
		// 	// if(typeList[i] ==  "BEN"){
		// 	// 	temp2.push(answerList[i]);
		// 	// }
		// 	if(typeList[i] ==  "TRAD"){
		// 		temp3.push(answerList[i]);
		// 	}
		//     if(typeList[i] ==  "CON"){
		// 		temp4.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "SEC"){
		// 		temp5.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "POW"){
		// 		temp6.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "ACH"){
		// 		temp7.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "HED"){
		// 		temp8.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "STIM"){
		// 		temp9.push(answerList[i]);
		// 	}
		// 	if(typeList[i] ==  "SD"){
		// 		temp10.push(answerList[i]);
		// 	}
		// }
		//
		// function sum(arr) {
		// 	var s = parseInt(arr[0]);
		// 	for (i=1; i<arr.length; i++) {
		// 	s += parseInt(arr[i]);
		// }
		// 	return s;
		// }
		// Themes begin
		am4core.useTheme(am4themes_animated);
		// Themes end
		// Create chart
		var chart = am4core.create("chartdiv", am4charts.PieChart);
		chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
		// chart.radius = am4core.percent(80);
		chart.data = [
			{
				category: "UNI",
				value: temp1/3,
				description: "Understanding, appreciation, tolerance and protection \n for the welfare of all people and for nature.",
				fullname:"UNIVERSALISM",
				value2: 2,
			},
			{
				category: "BEN",
				value: temp2/2,
				description: "Preservation and enhancement of the \n welfare of people with whom one is in \n frequent personal contact. welfare of people with whom one is in frequent personal contact.",
				fullname:"BENEVOLENCE",
				value2: 2,
			},
			{
				category: "TRAD",
				value: temp3/2,
				description: "Respect, commitment and acceptance of \n the customs and ideas that traditional \n culture or religion provide the self.",
				fullname:"TRADITION",
				value2: 2,
			},
			{
				category: "CON",
				value: temp4/2,
				description: "Restraint of actions, inclinations and \n impulses likely to upset or harm others \n and violate social expectations or norms. ",
				fullname:"CONFORMITY",
				value2: 2,
			},
			{
				category: "SEC",
				value: temp5/2,
				description: "Safety, harmony, and stability of society, of relationships, and of self.",
				fullname:"SECURITY",
				value2: 2,
			},
			{
				category: "POW",
				value: temp6/2,
				description: "Social status and prestige, control or \n dominance over people and resources.",
				fullname:"POWER",
				value2: 2,
			},
			{
				category: "ACH",
				value: temp7/2,
				description: "Personal success through demonstrating \n competence according to social standards. ",
				fullname:"ACHIEVEMENT",
				value2: 2,
			},
			{
				category: "HED",
				value: temp8/2,
				description: "Pleasure and sensuous gratification for oneself. ",
				fullname:"HEDONISM",
				value2: 2,
			},
			{
				category: "STIM",
				value: temp9/2,
				description: "Excitement, novelty and challenge in life.",
				fullname:"STIMULATION",
				value2: 2,
			},
			{
				category: "SD",
				value: temp10/2,
				description: "Independent thought and action—choosing, creating, exploring. ",
				fullname:"SELF-DIRECTION",
				value2: 2,
			},
		];
		var colorSet = new am4core.ColorSet();
		colorSet.list = ["#82B241", "#4E7A35", "#3DAEE4", "#6878D8", "#0473BA","#872784","#D62129","#F158A1","#F26F2C","#F7CF25"].map(function(color) {
			return new am4core.color(color);
		});
		var series = chart.series.push(new am4charts.PieSeries());
		series.dataFields.value = "value2";
		series.dataFields.radiusValue = "value";
		series.dataFields.category = "category";
		series.slices.template.cornerRadius = 6;
		series.colors.step = 3;
		series.hiddenState.properties.endAngle = -90;
		series.colors = colorSet;
		series.slices.template.tooltipText = "Value Category: {fullname}\nYour Value: {value.percent.formatNumber('#.0')}% \n Average Value: {radiusValue} \n Description: {description}" ;
		series.tooltip.pointerOrientation = "vertical";
		// series.tooltip.label.interactionsEnabled = true;
		chart.legend = new am4charts.Legend();
		chart.legend.position = "left";
		chart.legend.valign = "middle";
		chart.legend.align = "50";
		series.legendSettings.valueText = "{valueY.close}";
		var topContainer = chart.chartContainer.createChild(am4core.Container);
		topContainer.layout = "absolute";
		topContainer.toBack();
		topContainer.paddingBottom = 30;
		topContainer.width = am4core.percent(100);
		var axisTitle = topContainer.createChild(am4core.Label);
		axisTitle.text = "Your Personal value";
		axisTitle.fontWeight = 900;
		axisTitle.align = "middle";
		axisTitle.paddingLeft = 50 ;
		chart.legend.useDefaultMarker = true;
		var marker = chart.legend.markers.template.children.getIndex(0);
		marker.cornerRadius(12, 12, 12, 12);
		marker.strokeWidth = 2;
		marker.strokeOpacity = 1;
		marker.stroke = am4core.color("#ccc");
		series.labels.template.text = "{category}: {radiusValue}";
		var legendContainer = am4core.create("legenddiv", am4core.Container);
		legendContainer.width = am4core.percent(100);
		legendContainer.height = am4core.percent(100);
		chart.legend.parent = legendContainer;
	</script>


	<div id="chartdiv2"></div>

	<script>
		// //for question type
		// var typelist = [];
		// //collect all
		// var allchoose = [];
		// //for random question
		// var qestionArray = [];
		var value = window.sessionStorage.name;
		var obj = JSON.parse(value);
		console.log(obj);
		function firstN(obj, fro, to ) {
			return Object.keys(obj) //get the keys out
					.sort() //this will ensure consistent ordering of what you will get back. If you want something in non-aphabetical order, you will need to supply a custom sorting function
					.slice(fro, to) //get the first N
					.reduce(function(memo, current) { //generate a new object out of them
						memo[current] = obj[current];
						return memo;
					}, {})
		}
		var newo = firstN(obj, 10, 14);
		console.log(newo);
		var keys = Object.keys(newo);
		console.log(keys);
		// var temp1 =  obj["UNI"];
		// var temp2 =  obj["BEN"];
		// var temp3 =  obj["TRAD"];
		// var temp4 =  obj["CON"];
		// var temp5 =  obj["SEC"];
		// var temp6 =  obj["POW"];
		// var temp7 = obj["ACH"];
		// var temp8 = obj["HED"];
		// var temp9 = obj["STIM"];
		// var temp10 = obj["SD"];
		//Define the option of the select according to the info from the previous page
		var myobject = {
			country : newo["country"],
			gender : newo["gender"],
			age : newo["age"],
			party : newo["party"],
		};
		var select = document.getElementById("average");
		for(index in myobject) {
			select.options[select.options.length] = new Option(myobject[index], index);
		}
		var myResponse;
		$.ajax({
			url: "http://www.valuessurvey.com.au/compare/getAverageDataByUserData",
			type: "POST",
			data: JSON.stringify(newo),
			async: false,
			contentType: "application/json; charset=utf-8",
			success: function (data) {
				myResponse = data.data;
			},
			error: function (ex) {
				alert(ex.responseText);
			}
		});
		console.log(myResponse);
		var title = "";
		for (var i = 0; i < myResponse.length; i++) {
			if ("country" in myResponse[i]){
				var country = myResponse[i];
				title = country["country"];
				console.log(country["uni"]);
			}
			if ("age" in myResponse[i]){
				var age = myResponse[i];
				console.log(age);
			}
			if ("gender" in myResponse[i]){
				var gender = myResponse[i];
				console.log(gender);
			}
			if ("party" in myResponse[i]){
				var party = myResponse[i];
				console.log(party);
			}}
		var selectAarray = country;
		$('select').on('change', function() {
			var selectAarray = eval(this.value) ;
			title = selectAarray[this.value];
			var newTitle = title + " Average Personal Value";
			drawPiechart(selectAarray,newTitle);
		});
		// Themes begin
		initialTitle = title + " Average Personal Value";
		drawPiechart(selectAarray, initialTitle);
		function drawPiechart(selectAarray, titleString) {
			am4core.useTheme(am4themes_animated);
			// Themes end
			// Create chart
			var chart = am4core.create("chartdiv2", am4charts.PieChart);
			chart.hiddenState.properties.opacity = 0; // this creates initial fade-in
			chart.data = [
				{
					category: "UNI",
					value: temp1 / 3,
					description: "Understanding, appreciation, tolerance and protection \n for the welfare of all people and for nature.",
					fullname: "UNIVERSALISM",
					value2: 2,
					averageValue: selectAarray["uni"],
				},
				{
					category: "BEN",
					value: temp2 / 2,
					description: "Preservation and enhancement of the \n welfare of people with whom one is in \n frequent personal contact. welfare of people with whom one is in frequent personal contact.",
					fullname: "BENEVOLENCE",
					value2: 2,
					averageValue: selectAarray["ben"],
				},
				{
					category: "TRAD",
					value: temp3 / 2,
					description: "Respect, commitment and acceptance of \n the customs and ideas that traditional \n culture or religion provide the self.",
					fullname: "TRADITION",
					value2: 2,
					averageValue: selectAarray["trad"],
				},
				{
					category: "CON",
					value: temp4 / 2,
					description: "Restraint of actions, inclinations and \n impulses likely to upset or harm others \n and violate social expectations or norms. ",
					fullname: "CONFORMITY",
					value2: 2,
					averageValue: selectAarray["con"],
				},
				{
					category: "SEC",
					value: temp5 / 2,
					description: "Safety, harmony, and stability of society, of relationships, and of self.",
					fullname: "SECURITY",
					value2: 2,
					averageValue: selectAarray["sec"],
				},
				{
					category: "POW",
					value: temp6 / 2,
					description: "Social status and prestige, control or \n dominance over people and resources.",
					fullname: "POWER",
					value2: 2,
					averageValue: selectAarray["pow"],
				},
				{
					category: "ACH",
					value: temp7 / 2,
					description: "Personal success through demonstrating \n competence according to social standards. ",
					fullname: "ACHIEVEMENT",
					value2: 2,
					averageValue: selectAarray["ach"],
				},
				{
					category: "HED",
					value: temp8 / 2,
					description: "Pleasure and sensuous gratification for oneself. ",
					fullname: "HEDONISM",
					value2: 2,
					averageValue: selectAarray["hed"],
				},
				{
					category: "STIM",
					value: temp9 / 2,
					description: "Excitement, novelty and challenge in life.",
					fullname: "STIMULATION",
					value2: 2,
					averageValue: selectAarray["stim"],
				},
				{
					category: "SD",
					value: temp10 / 2,
					description: "Independent thought and action—choosing, creating, exploring. ",
					fullname: "SELF-DIRECTION",
					value2: 2,
					averageValue: selectAarray["sd"],
				},
			];
			var colorSet = new am4core.ColorSet();
			colorSet.list = ["#82B241", "#4E7A35", "#3DAEE4", "#6878D8", "#0473BA", "#872784", "#D62129", "#F158A1", "#F26F2C", "#F7CF25"].map(function (color) {
				return new am4core.color(color);
			});
			var series = chart.series.push(new am4charts.PieSeries());
			series.dataFields.value = "value2";
			series.dataFields.radiusValue = "averageValue";
			series.dataFields.category = "category";
			series.slices.template.cornerRadius = 6;
			series.colors.step = 3;
			series.hiddenState.properties.endAngle = -90;
			series.slices.template.tooltipText = "Value Category: {fullname}\nYour Value: {value.percent.formatNumber('#.0')}% \n Average Value{radiusValue} \n Description: {description}";
			series.tooltip.pointerOrientation = "vertical";
			series.tooltip.label.interactionsEnabled = true;
			series.colors = colorSet;
			var topContainer = chart.chartContainer.createChild(am4core.Container);
			topContainer.layout = "absolute";
			topContainer.toBack();
			topContainer.paddingBottom = 30;
			topContainer.width = am4core.percent(100);
			var axisTitle = topContainer.createChild(am4core.Label);
			axisTitle.text = titleString;
			axisTitle.fontWeight = 900;
			axisTitle.align = "middle";
			axisTitle.paddingLeft = 50;
			series.slices.template.interactionsEnabled = true;
			series.slices.template.events.on(
					"hit",
					ev => {
				var item = ev.target.dataItem.component.tooltipDataItem.dataContext;
			alert("line clicked on: " + item.category + ": " + item.marketing);
		},
			this
		);
			series.labels.template.text = "{category}: {radiusValue}";
		}
	</script>
	<!--<div class="TEST">-->
	<div class="hidden_div" id="hiddenDivId"></div>
	<div id="link">

		<div class="addthis_inline_share_toolbox_jlq2">  </div>
		<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5cd4fb38aeca67fc"></script>
	</div>


	<div class="main">
		<div class="left">
			<div class="photo">
				<img class='center-fit' src="colours_image/green.png" >
			</div>
			<div class="intro" >
				<p> <font style="font-family: WildWest;  font-size: large" color="#82B241"> Universalism </font><br>
					<font style="font-family: Verdana; ">Understanding, appreciation, tolerance and protection
						for the welfare of all people and for nature.</font>
				</p>
			</div>

			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/darkgreen.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#4E7A35"> Benevolence </font><br>
					<font style="font-family: Verdana; ">Preservation and enhancement of the welfare of people with whom one is in frequent personal contact.
						welfare of people with whom one is in
						frequent personal contact.</font>
				</p>
			</div>

			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/blue.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#3DAEE4"> Tradition </font><br>
					<font style="font-family: Verdana; ">Respect, commitment and acceptance of the customs and ideas that traditional culture or religion provide the self.</font>
				</p>
			</div>
			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/lightpurple.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#6878D8"> Conformity </font><br>
					<font style="font-family: Verdana; ">Restraint of actions, inclinations and
						impulses likely to upset or harm others and violate social expectations or norms..</font>
				</p>
			</div>
			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/darkblue.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#0473BA"> Security </font><br>
					<font style="font-family: Verdana; ">Safety, harmony, and stability of society, of relationships, and of self.</font>
				</p>
			</div>

		</div>


		<div class="middle"></div>


		<div class="right">
			<div class="photo">
				<img class='center-fit' src="colours_image/purple.png" >
			</div>
			<div class="intro" >
				<p> <font style="font-family: WildWest;  font-size: large" color="#872784"> Power </font><br>
					<font style="font-family: Verdana; ">Social status and prestige, control or
						dominance over people and resources.</font>
				</p>
			</div>

			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/red.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#D62129"> Achievement </font><br>
					<font style="font-family: Verdana; ">Personal success through demonstrating competence according to social standards.
					</font>
				</p>
			</div>

			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/pink.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#F158A1"> Hedonism </font><br>
					<font style="font-family: Verdana; ">Pleasure and sensuous gratification for oneself. </font>
				</p>
			</div>
			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/orange.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#F26F2C"> Stimulation </font><br>
					<font style="font-family: Verdana; ">Excitement, novelty and challenge in life.</font>
				</p>
			</div>
			<div class="white"></div>

			<div class="photo">
				<img class='center-fit' src="colours_image/yellow.png" >
			</div>
			<div class="intro">
				<p> <font style="font-family: WildWest;  font-size: large; " color="#F7CF25"> Self-direction </font><br>
					<font style="font-family: Verdana; ">Independent thought and action—choosing, creating, exploring.</font>
				</p>
			</div>
		</div>
	</div>

	<!--<img width="80%" style="margin-left: 9%;margin-top: 8%;margin-bottom: 5%;" src="WechatIMG94.png">-->
</div>
</body>
</html>